---
title: 使用 MAC 快速測試網路頻寬
date: 2023-4-25
excerpt: |
  Short summary goes here.
draft: true
---

Environment

Host: 2023 MAC Mini M2
```
user@userdeMac-mini ~ % uname -a
Darwin userdeMac-mini.local 22.4.0 Darwin Kernel Version 22.4.0: Mon Mar 6 21:01:02 PST 2023; root:xnu-8796.101.5~3/RELEASE_ARM64_T8112 arm64
```

也假設 Homebrew 已經安裝完成了 ; 其實預設也有 speedtest-cli 可以用，但如果有官方的原創，好像也不賴，重點其實也就測試數據罷了

Install

先清掉舊的
```
brew uninstall speedtest-cli --force\n
```

再來裝新的

```
brew tap teamookla/speedtest\n
brew update
brew install speedtest --force
```

How to use it?

先看 help

```
user@userdeMac-mini ~ % networkQuality --help
networkQuality: illegal option -- -
USAGE: networkQuality [-C ] [-c] [-h] [-I ] [-k] [-p] [-r host] [-s] [-v]
-C: override Configuration URL or path (with scheme file://)
-c: Produce computer-readable output
-h: Show help (this message)
-I: Bind test to interface (e.g., en0, pdp_ip0,…)
-k: Disable certificate validation
-p: Use Private Relay
-r: Connect to host or IP, overriding DNS for initial config request
-s: Run tests sequentially instead of parallel upload/download
-v: Verbose output
```

啟動執行的話就是加個 -v 即可 ; 建議 sequentially 執行畢竟也是個非對稱線路，數據不好看

```
user@userdeMac-mini ~ % networkQuality -v -s
Downlink: capacity 396.405 Mbps, responsiveness 684 RPM (15.609 MB transferred) - Uplink: capacity 0.000 Mbps, responsiveness 0 RPM (0 B transferred
skip
Downlink: capacity 436.744 Mbps, responsiveness 267 RPM (472.174 MB transferred) - Uplink: capacity 218.527 Mbps, responsiveness 1865 RPM (457.728 M
==== SUMMARY ====
Uplink capacity: 224.981 Mbps (Accuracy: High)
Downlink capacity: 436.744 Mbps (Accuracy: High)
Uplink Responsiveness: High (1865 RPM) (Accuracy: High)
Downlink Responsiveness: Medium (267 RPM) (Accuracy: High)
Idle Latency: 12.958 milliseconds (Accuracy: High)
Interface: en1
Uplink bytes transferred: 461.166 MB
Downlink bytes transferred: 472.174 MB
Uplink Flow count: 20
Downlink Flow count: 12
Start: 2023/4/25 上午12:00:04
End: 2023/4/25 上午12:00:31
OS Version: Version 13.3.1 (Build 22E261)
```

以光世代 500M/250M 802.11ax (其實雜訊不低) 測試這樣

應該也夠 WFH 用了